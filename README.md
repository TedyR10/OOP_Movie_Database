**Name: Theodor-Ioan Rolea**

**Group: 323CA**

# POOTV

### Description:

* This project focuses on developing a Netflix-like app in Java
* The user can perform several actions, from changing pages, filtering, 
purchasing, watching, rating movies, to subscribing to his favorite genres.
***

### Design patterns & program structure
* For both databases I am using the singleton design pattern due to their only instantiation
being when the program is started. We don't need more instances of the databases as we are
clearing them after each test.
* For pages, I am using the visitor design pattern, as I find it really useful in this case, 
  making the creation of other pages if needed later on really easy.
* For the output I am using the factory design pattern, because I need specific outputs for 
  different scenarios.
* For filtering movies I am using the strategy design pattern, because we don't always have to 
  sort by the same criteria.
* For subscriptions, I am using the observer design pattern to update all the users if a movie 
  from their subscribed categories has been either added or deleted from the database.
* Packages are named and organized based on the purpose they serve in our program.
***

### How the program works
* We start by reading the input from a file & entering both the users and movies into our
databases. After that, we initialize the current session & start iterating through the actions.
* Actions are then received sequentially and are handled by the ActionHandler class. We can 
  change pages, do page-specific actions or subscribe to different genres. Here we can also 
  delete or add new movies into the database.
* Then, every action ends up in the PageVisitor class where the visitors are implemented. 
  This class does most of the heavy lifting, as here we have most of our methods.
* From here, every visit method does specific things, from purchasing a movie to filtering the 
  available movies by a genre.
***

### Class comments (*Only worth mentioning)

#### OutputGenerator
* Outputs are generated by factory based on different circumstances and are displayed
  after an error or successful attempts at logging in, registering, changing page to "movies",
  seeing details about a movie, purchasing, watching, liking, rating a movie, when
  searching/filtering movies, when using the back command or when getting a recommendation.
***

#### Session
* In this class I store info about the current session: if there is anyone logged in, which user 
  is logged in, their current movies list (different from their available movies list if we 
  apply filter/search/sort), the current movie for see details action & a list containing the 
  previously accessed pages. At first, I wanted to do the back function using the Command design 
  pattern, but it wasn't necessary for the current task.

***

#### Filters
* Filtering movies can be done by actors or genres and movies can also be sorted either by rating or
  duration.
* Here, I check what actions I need to perform and make use of the strategy design pattern by 
  calling the FiltersContext class to execute the right strategy.

***

#### PageVisitor
* PageVisitor is the class where most of the methods for visit are implemented and mainly checks 
  for the right circumstances, then calls the appropriate method for the action given.

***

#### User
* The generateRecommendation method works the following way:
* - makes a deep copy of the current hashmap where the liked genres of the user are stored & 
    makes a new TreeSet to be sorted automatically (probably could've done this in the first place)
* - resets the movies for the user
* - sorts the movies accordingly
* - iterates through the list & tries to find the most liked & unwatched movie that contains the 
    user's most liked genre. If the movies don't match the most liked genre, gets the next most 
    liked genre & tries to find a movie for the user and so on until we go through all the user's
    genres
* - if no movie was found, a notification is sent to the user that it has no recommendations

### Other Comments:
* Let me know what I can improve upon in the future. Thank you for reading this :)